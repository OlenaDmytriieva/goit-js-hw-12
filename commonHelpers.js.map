{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function queryPixabay(query, page, limit) {\n  return await axios\n    .get('https://pixabay.com/api/', {\n      params: {\n        key: '42368868-12588a31d2c2b3196976be5e8',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit,\n        page: page,\n      },\n    })\n    .then(response => {\n      if (response.status !== 200) {\n        throw new Error('Network response is not ok');\n      }\n      return response.data;\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createGallery(images, append) {\n  const myGallery = document.querySelector('.gallery');\n  const result = images\n    .map(image => {\n      return `<li class=\"gallery-item\">\n                        <div class=\"box\">\n                          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-likes=\"${image.likes}\" data-views=\"${image.views}\" data-comments=\"${image.comments}\" data-downloads=\"${image.downloads}\"/>\n                            <div class=\"img-card\">\n                              <div class=\"img-data\">\n        <h4 class=\"data-title\">Likes</h4>\n        <p class=\"data-value\">\n          ${image.likes}\n        </p>\n      </div>\n      <div class=\"img-data\">\n        <h4 class=\"data-title\">Views</h4>\n        <p class=\"data-value\">\n          ${image.views}\n        </p>\n      </div>\n      <div class=\"img-data\">\n        <h4 class=\"data-title\">Comments</h4>\n        <p class=\"data-value\">\n          ${image.comments}\n        </p>\n      </div>\n      <div class=\"img-data\">\n        <h4 class=\"data-title\">Downloads</h4>\n        <p class=\"data-value\">\n          ${image.downloads}\n        </p>\n      </div>\n                            </div>\n                          </a>\n                        </div>\n                      </li>`;\n    })\n    .join('\\n');\n\n  if (append) {\n    myGallery.insertAdjacentHTML('beforeend', result);\n  } else {\n    myGallery.innerHTML = result;\n  }\n\n  let gallery = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n\n  gallery.on('show.simplelightbox', function () {});\n  gallery.refresh();\n}\n\nexport const loadMoreBtn = document.querySelector('.load-more-button');\nexport function showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n","import { queryPixabay } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport { showLoadMoreButton } from './js/render-functions';\nimport { hideLoadMoreButton } from './js/render-functions';\nimport { loadMoreBtn } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loaderElement = document.querySelector('.loader');\n\nlet page = 1;\nlet limit = 15;\nlet totalPages;\nlet currentQuery = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const query = form.querySelector('input').value.trim();\n\n  if (query) {\n    loaderElement.style.display = 'block';\n    if (currentQuery !== query) {\n      page = 1;\n    }\n    currentQuery = query;\n\n    try {\n      const data = await queryPixabay(query, page, limit);\n      const images = data.hits;\n      totalPages = Math.ceil(data.totalHits / limit);\n      if (images.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          titleColor: '#FFF',\n          messageColor: '#FFF',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n          theme: 'dark',\n          timeout: 5000,\n        });\n      } else {\n        createGallery(images, false);\n        loaderElement.style.display = 'none';\n        showLoadMoreButton();\n        if (page > totalPages) {\n          iziToast.error({\n            title: 'Error',\n            titleColor: '#FFF',\n            messageColor: '#FFF',\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            theme: 'dark',\n            timeout: 5000,\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      loaderElement.style.display = 'none';\n    }\n  } else {\n    iziToast.warning({\n      title: 'Caution',\n      titleColor: '#FFF',\n      messageColor: '#FFF',\n      message: 'This input field cannot be empty. Please enter your request!',\n      backgroundColor: '#FFA000',\n      position: 'topRight',\n      theme: 'dark',\n      timeout: 5000,\n    });\n    loaderElement.style.display = 'none';\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  loaderElement.style.display = 'block';\n  hideLoadMoreButton();\n  page++;\n\n  try {\n    const data = await queryPixabay(currentQuery, page, limit);\n    const images = data.hits;\n\n    if (images.length > 0) {\n      createGallery(images, true);\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  } finally {\n    loaderElement.style.display = 'none';\n  }\n});\n"],"names":["queryPixabay","query","page","limit","axios","response","createGallery","images","append","myGallery","result","image","gallery","SimpleLightbox","loadMoreBtn","showLoadMoreButton","hideLoadMoreButton","form","loaderElement","totalPages","currentQuery","e","data","iziToast","error"],"mappings":"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"}